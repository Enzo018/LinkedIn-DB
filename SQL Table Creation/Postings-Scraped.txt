CREATE TABLE IF NOT EXISTS public.postings_scraped
(
    job_id bigint NOT NULL,
    job_posting_url character varying(1000) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT postings_scraped_pkey PRIMARY KEY (job_id, job_posting_url),
    CONSTRAINT postings_scraped_ref_postings_fk FOREIGN KEY (job_id)
        REFERENCES public.postings (job_id) MATCH SIMPLE
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
        NOT VALID,
    CONSTRAINT postings_scraped_ref_scraped_fk FOREIGN KEY (job_posting_url)
        REFERENCES public.scraped (job_posting_url) MATCH SIMPLE
        ON UPDATE RESTRICT
        ON DELETE RESTRICT
        NOT VALID
)

TABLESPACE pg_default;

CREATE INDEX IF NOT EXISTS fki_postings_scraped_ref_postings_fk
    ON public.postings_scraped USING btree
    (job_id ASC NULLS LAST)
    TABLESPACE pg_default;
-- Index: fki_postings_scraped_ref_scraped_fk

-- DROP INDEX IF EXISTS public.fki_postings_scraped_ref_scraped_fk;

CREATE INDEX IF NOT EXISTS fki_postings_scraped_ref_scraped_fk
    ON public.postings_scraped USING btree
    (job_posting_url COLLATE pg_catalog."default" ASC NULLS LAST)
    TABLESPACE pg_default;